<html><head>
    <script>
        const voiceLinks = [
            'ga',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20120221/31083/SND000019786.mp3',
            'na',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20160913/20000/16000/318550/SND000327904.mp3',
            'da',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20120214/26426/SND000015129.mp3',
            'la',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20160913/40000/39000/343855/SND000353209.mp3',
            'ma',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20160913/60000/51000/310095/SND000319449.mp3',
            'ba',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20160913/20000/20000/312870/SND000322224.mp3',
            'sa',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20160913/30000/29000/309787/SND000319141.mp3',
            'aa',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20160913/30000/21000/295063/SND000304417.mp3',
            'ja',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20160913/50000/49000/325762/SND000335116.mp3',
            'cha',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20160913/50000/50000/304456/SND000313810.mp3',
            'ka',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20120506/75771/SND000064474.mp3',
            'ta',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20160913/10000/01000/333647/SND000343001.mp3',
            'pa',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20160913/40000/38000/327246/SND000336600.mp3',
            'ha',
            'https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20160913/20000/18000/338085/SND000347439.mp3'
        ];
        window.onload = ()=>{
            downloadNext();
        }

        let i = 0;
        function downloadNext() {
            if (i < voiceLinks.length) {
                const uri = voiceLinks[i + 1];
                const name = voiceLinks[i] + ".mp3";
                //downloadURI(uri, name);
                fetch(uri)
                .then(response=>{
                    console.log(response);
                    return response.blob();
                })
                .then(blob=>{
                    //console.log(blob);
                    let blobUrl = window.URL.createObjectURL(blob);
                    downloadBlob(blobUrl, name);
                })
                .then(()=>{
                    i += 2;
                    setTimeout(()=>{downloadNext();},1000);
                })
                .catch(e=>console.error(e));

            }
        }

        function downloadBlob(uri, name) 
        {
            let link = document.createElement("a");
            // If you don't know the name or want to use
            // the webserver default set name = ''
            link.download = name;
            link.href = uri;
            link.innerHTML = name;
            document.body.appendChild(link);
            link.click();

            let br = document.createElement("br");
            document.body.appendChild(br);
            //link.remove();

            // let audio = document.createElement("audio");
            // audio.src = uri;
            // audio.setAttribute("controls", "");
            // document.body.appendChild(audio);
            // document.body.appendChild(br);
        }
    </script>
</head>
<body>
    <audio src='https://dicmedia.korean.go.kr/multimedia/multimedia_files/convert/20120221/31083/SND000019786.mp3' controls></audio>
</body>
</html>
